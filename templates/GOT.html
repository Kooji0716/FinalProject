{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='fantasy.css') }}">
{% endblock %}

{% block content %}
<div class="got-container">

    <h1 class="got-title">冰與火之歌：權力遊戲</h1>

    <!-- 上半部：海報 + 資訊 -->
    <div class="got-main">
        <img class="got-poster"
             src="{{ url_for('static', filename='movies/GOT.jpg') }}"
             alt="冰與火之歌：權力遊戲">

        <div class="got-details">
            <p><strong>類型：</strong>奇幻 / 劇情 / 冒險</p>
            <p><strong>年份：</strong>2011 - 2019</p>
            <p><strong>導演：</strong>David Benioff, D. B. Weiss</p>
            <p><strong>主演：</strong>Kit Harington, Emilia Clarke, Peter Dinklage 等</p>
            <p><strong>簡介：</strong></p>
            <p>
                《冰與火之歌：權力遊戲》改編自喬治·R·R·馬丁的奇幻小說《冰與火之歌》，
                描述維斯特洛大陸上幾大家族間的權力鬥爭、政治陰謀與魔法再臨，
                展現了人性、忠誠與背叛的深刻交織。
            </p>
        </div>
    </div>

    <!-- 下半部：留言區 -->
    <div class="got-comments">
        <h2>影迷討論</h2>

        <!-- 留言表單 -->
        {% if session.get('username') %}
            <form method="POST" class="comment-form">
                <textarea name="comment" rows="4" style="width: 100%;" placeholder="歡迎留下你對這部影集的看法！" required></textarea>
                <button type="submit">送出留言</button>
            </form>
        {% else %}
            <p style="color: red; font-weight: bold;">
                尚未登入，<a href="{{ url_for('login') }}">登入後即可留言</a>
            </p>
        {% endif %}

        <!-- 顯示留言列表 -->
        <ul class="comment-list">
            {% for c in comments %}
                <li class="comment-item">
                    <strong>{{ c['username'] }}</strong> 說：<br>
                    <div class="comment-content">{{ c['comment'] }}</div>
                    <small class="comment-time">{{ c['timestamp'] }}</small>
                </li>
            {% else %}
                <li>目前還沒有留言，成為第一位發表想法的人吧！</li>
            {% endfor %}
        </ul>

    </div>

</div>
{% endblock %}
