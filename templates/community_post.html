{% extends "base.html" %}

{% block content %}
<div class="got-container">

    <!-- è²¼æ–‡ä¸»é«” -->
    <div class="comment-item" style="margin-bottom: 30px;">
        <h2>{{ post['title'] }}</h2>
        <pre style="font-family: monospace; white-space: pre-wrap; margin-bottom: 5px;">
{{- post['content'] -}}
        </pre>
        <small>ğŸ‘¤ {{ post['username'] }} ï½œ {{ post['timestamp'] }}</small>
    </div>

    <!-- ç•™è¨€å€ -->
    <h3>ğŸ’¬ ç•™è¨€å€</h3>
    {% for comment in comments %}
        <div class="comment-item" style="margin-bottom: 15px;">
            <pre style="font-family: monospace; white-space: pre-wrap; margin-bottom: 5px;">
{{- comment['comment'] -}}
            </pre>
            <small>ğŸ‘¤ {{ comment['username'] }} ï½œ {{ comment['timestamp'] }}</small>
        </div>
    {% else %}
        <p>ç›®å‰é‚„æ²’æœ‰ç•™è¨€ï¼Œæˆç‚ºç¬¬ä¸€å€‹ç•™è¨€çš„äººå§ï¼</p>
    {% endfor %}

    <!-- æ–°å¢ç•™è¨€ -->
    {% if session.get('username') %}
        <form method="POST" style="margin-top: 20px;">
            <textarea
                name="comment"
                rows="4"
                placeholder="å¯«ä¸‹ä½ çš„ç•™è¨€..."
                required
                style="width: 100%; padding: 10px;"
            ></textarea>
            <button type="submit" style="margin-top: 10px;">ç•™è¨€</button>
        </form>
    {% else %}
        <p style="color:red; font-weight:bold;">
            å°šæœªç™»å…¥ï¼Œ<a href="{{ url_for('login') }}">ç™»å…¥å¾Œå³å¯ç•™è¨€</a>
        </p>
    {% endif %}

</div>
{% endblock %}
